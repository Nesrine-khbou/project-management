<!-- Toolbar -->
<div
  class="mb-6 grid grid-cols-1 gap-3 md:grid-cols-12"
>
  <!-- Search -->
  <div class="md:col-span-7">
    <div
      class="flex items-center gap-2 rounded-2xl px-4 py-3
             bg-white/70 backdrop-blur border border-white/60 ring-1 ring-slate-200/60
             shadow-sm
             dark:bg-slate-900/50 dark:border-slate-700/40 dark:ring-slate-700/50"
    >
      <svg class="h-5 w-5 text-slate-400 dark:text-slate-300" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z"/>
      </svg>

      <input
        type="text"
        placeholder="Rechercher un projet..."
        [(ngModel)]="searchTerm"
        class="w-full bg-transparent outline-none
               text-slate-900 placeholder:text-slate-400
               dark:text-white dark:placeholder:text-slate-400"
      />
    </div>
  </div>

  <!-- Status filter -->
  <div class="md:col-span-3">
    <div
      class="rounded-2xl px-4 py-3
             bg-white/70 backdrop-blur border border-white/60 ring-1 ring-slate-200/60
             shadow-sm
             dark:bg-slate-900/50 dark:border-slate-700/40 dark:ring-slate-700/50"
    >
      <select
        [(ngModel)]="statusFilter"
        class="w-full bg-transparent outline-none
               text-slate-900 dark:text-white"
      >
        <option value="">Tous les statuts</option>
        <option value="En cours">En cours</option>
        <option value="En attente">En attente</option>
        <option value="Terminé">Terminé</option>
      </select>
    </div>
  </div>

  <!-- Add project -->
  <div class="md:col-span-2 md:flex md:justify-end">
    <button
      (click)="toggleAddForm()"
      type="button"
      class="w-full md:w-auto inline-flex items-center justify-center gap-2
             rounded-2xl px-2 py-1 text-sm font-semibold text-white
             bg-gradient-to-r from-indigo-600 to-indigo-500
             hover:opacity-95 hover:shadow-lg
             focus:outline-none focus:ring-2 focus:ring-indigo-500/40"
    >
      <span class="text-lg leading-none">+</span>
      Ajouter projet
    </button>
  </div>
</div>

<!-- Show AddProject form -->
@if (showAddForm) {
  <app-add-project
    (projectAdded)="addProject($event)"
    (cancel)="toggleAddForm()"
  ></app-add-project>
}

<!-- List -->
<div class="space-y-6">
  @if (filteredProjects.length > 0) {
    @for (project of filteredProjects; track project.name) {
      <app-project-card
        [project]="project"
        (taskAdded)="addTaskToProject($event)"
        (projectUpdated)="updateProject($event)"
      ></app-project-card>
    }
  } @else {
    <div
      class="rounded-2xl p-10 text-center
             bg-white/60 backdrop-blur border border-white/60 ring-1 ring-slate-200/60
             dark:bg-slate-900/40 dark:border-slate-700/40 dark:ring-slate-700/50"
    >
      <p class="text-slate-500 dark:text-slate-300 italic">
        Aucun projet trouvé.
      </p>
    </div>
  }
</div>
