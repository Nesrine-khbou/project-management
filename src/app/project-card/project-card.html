<div
  class="bg-white dark:bg-gray-800 mb-6 rounded p-6 border border-gray-200 
         dark:border-gray-700 transition-colors duration-200"
>
  <!-- Project Header -->
  <div class="flex items-start justify-between mb-4">
    <div class="flex-1">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-1">
        {{ project.name }}
      </h2>
      <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed mt-3">
        {{ project.description }}
      </p>
    </div>

    <div class="flex flex-col items-end gap-2">
      <button
        (click)="toggleEditProjectForm()"
        class="bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800
               text-blue-700 dark:text-blue-200 border border-blue-200 dark:border-blue-700
               font-medium px-3 py-1 rounded text-sm
               transition-colors duration-200"
        title="Modifier le projet"
      >
      Modifier
      </button>

      <span
        class="px-3 py-1 text-xs font-medium rounded mt-2"
        [ngClass]="{
          'bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200': project.status === 'Terminé',
          'bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-200': project.status === 'En cours',
          'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300': project.status !== 'Terminé' && project.status !== 'En cours'
        }"
      >
        {{ project.status }}
      </span>
    </div>
  </div>

  <!-- Progress -->
  <div class="mb-4">
    <div class="flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-1">
      <span><strong>Progression</strong></span>
      <span>{{ getProjectProgress(project) }}%</span>
    </div>

    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded h-2 overflow-hidden">
      <div
        class="h-2 rounded transition-all duration-300"
        [ngClass]="{
          'bg-red-300 dark:bg-red-700': getProjectProgress(project) < 40,
          'bg-yellow-200 dark:bg-yellow-600': getProjectProgress(project) >= 40 && getProjectProgress(project) < 80,
          'bg-green-100 dark:bg-green-700': getProjectProgress(project) >= 80
        }"
        [style.width.%]="getProjectProgress(project)"
      ></div>
    </div>
  </div>

    <!-- Show Edit Project form -->
  @if (showEditProjectForm) {
    <app-edit-project
      [project]="project"
      (projectUpdated)="updateProject($event)"
      (cancel)="toggleEditProjectForm()"
    ></app-edit-project>
  }

    <!-- Show AddTask form -->
  @if (showAddTaskForm) {
    <app-add-task
      (taskAdded)="addTask($event)"
      (cancel)="toggleAddTaskForm()"
    ></app-add-task>
  }

  <!-- Task List -->
  <app-task-list 
    [tasks]="project.tasks"
    (addTaskClick)="toggleAddTaskForm()"
  ></app-task-list>
</div>
